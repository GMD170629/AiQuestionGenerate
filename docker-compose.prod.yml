version: '3.9'

# 生产环境配置
# 使用方法：docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.prod
    volumes:
      # 生产环境不挂载源代码
      - ./backend/data:/app/data
      - ./backend/uploads:/app/uploads
    environment:
      - DEV_MODE=false

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    environment:
      - NODE_ENV=production
      - BACKEND_URL=http://backend:8000

